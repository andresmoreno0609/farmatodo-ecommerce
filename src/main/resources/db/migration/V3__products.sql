CREATE TABLE IF NOT EXISTS products (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  sku VARCHAR(80) NOT NULL,
  name VARCHAR(160) NOT NULL,
  description VARCHAR(500),
  price DECIMAL(12,2) NOT NULL,
  stock INT NOT NULL,
  status VARCHAR(20) NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);
CREATE UNIQUE INDEX IF NOT EXISTS uk_products_sku ON products(sku);

CREATE TABLE IF NOT EXISTS product_search_log (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  query_text VARCHAR(255),
  min_stock INT,
  results BIGINT,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);
